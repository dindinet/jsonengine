<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>BBS sample</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

$(function() {
	query();
});

function post(msg) {
  $("#sendBtn").attr("disabled", true);
  $("#msgTxt").val("");
  $.post("/_je/msg", { msg: msg }, function (result){	
    query();
  }, "text");
}

function query() {
  $.get("/_q/msg", { sort: "_createdAt.desc" }, function (result) {
	$("#messages").empty();
    for (i = 0; i < result.length; i++) {
    	var name = result[i]._createdBy == null ? "nobody" : result[i]._createdBy.split("@")[0];
   		$("#messages").append("<br>(" + name + ") " + result[i].msg);        
    }
    $("#sendBtn").removeAttr("disabled");
  });
}

</script>
</head>

<body>
<h1>BBS sample</h1>
<input id="msgTxt" type="text" value=""  size="50">
<input id="sendBtn" type="button" value="Send" onclick="post($('#msgTxt').val());" >
<span id="messages"></span>
</body>

</html>